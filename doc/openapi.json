{"openapi": "3.0.0", "info": {"title": "rdiffweb", "description": "Auto-generated OpenAPI documentation", "version": "2.10.0rc2"}, "servers": [{"url": "/"}], "paths": {"/api": {"get": {"summary": "Returns the current application version in JSON format.", "description": "Returns the current application version in JSON format.\n\n**Example Response**\n\n```json\n{\n    \"version\": \"1.2.8\"\n}\n```", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": []}}, "/favicon_ico": {"get": {"summary": "Return favicon image file.", "description": "Return favicon image file.", "responses": {"200": {"description": "OK", "content": {"application/octet-stream": {}}}}, "parameters": []}}, "/header_logo": {"get": {"summary": "Return static `header-logo` image file.", "description": "Return static `header-logo` image file.", "responses": {"200": {"description": "OK", "content": {"application/octet-stream": {}}}}, "parameters": []}}, "/": {"get": {"summary": "Shows repositories of current user", "description": "Shows repositories of current user", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/logo": {"get": {"summary": "Return static `logo` image file.", "description": "Return static `logo` image file.", "responses": {"200": {"description": "OK", "content": {"application/octet-stream": {}}}}, "parameters": []}}, "/main_css": {"get": {"summary": "Return CSS file based on branding configuration", "description": "Return CSS file based on branding configuration", "responses": {"200": {"description": "OK", "content": {"text/css": {}}}}, "parameters": []}}, "/robots_txt": {"get": {"summary": "robots.txt to disable search crawler", "description": "robots.txt to disable search crawler", "responses": {"200": {"description": "OK", "content": {"application/octet-stream": {}}}}, "parameters": []}}, "/static/{filename}": {"get": {"summary": "Serve static files", "description": "Serve static files", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}, "404": {"description": "File not found"}}, "parameters": [{"name": "filename", "in": "path", "required": true, "description": "The name of the static file to retrieve.", "schema": {"type": "string"}}]}}, "/status/activities.json": {"get": {"summary": "Return list of repositories with less activities (new ,modified, deleted files).", "description": "Return list of repositories with less activities (new ,modified, deleted files).", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "path", "in": "query", "schema": {"type": "string"}, "required": true}, {"name": "days", "in": "query", "schema": {"type": "string", "default": "7"}}, {"name": "count", "in": "query", "schema": {"type": "string", "default": "10"}}, {"name": "sort", "in": "query", "schema": {"type": "string", "default": "1"}}]}}, "/status/age.json": {"get": {"summary": "Return the oldest backup.", "description": "Return the oldest backup.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "path", "in": "query", "schema": {"type": "string"}, "required": true}, {"name": "count", "in": "query", "schema": {"type": "string", "default": "10"}}]}}, "/status/disk_usage.json": {"get": {"summary": "Return disk usage.", "description": "Return disk usage.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "path", "in": "query", "schema": {"type": "string"}, "required": true}]}}, "/status/elapsetime.json": {"get": {"summary": "Return list of repositories with average elapse time (in minute).", "description": "Return list of repositories with average elapse time (in minute).", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "path", "in": "query", "schema": {"type": "string"}, "required": true}, {"name": "days", "in": "query", "schema": {"type": "string", "default": "7"}}, {"name": "count", "in": "query", "schema": {"type": "string", "default": "10"}}]}}, "/status/": {"get": {"summary": "Show current user status", "description": "Show current user status", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "query", "schema": {"type": "string"}, "required": true}, {"name": "days", "in": "query", "schema": {"type": "string", "default": "7"}}, {"name": "count", "in": "query", "schema": {"type": "string", "default": "10"}}]}}, "/status/per_days.json": {"get": {"summary": "Count number of backup per days.", "description": "Count number of backup per days.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "path", "in": "query", "schema": {"type": "string"}, "required": true}, {"name": "days", "in": "query", "schema": {"type": "string", "default": "7"}}]}}, "/stats/data.json/{path}": {"get": {"summary": "Return a json array with stats", "description": "Return a json array with stats", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}, {"name": "limit", "in": "query", "schema": {"type": "string", "default": "10"}}, {"name": "date", "in": "query", "schema": {"type": "string", "default": "None"}}]}}, "/stats/{path}": {"get": {"summary": "Show file statistics", "description": "Show file statistics", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}, {"name": "limit", "in": "query", "schema": {"type": "string", "default": "10"}}, {"name": "date", "in": "query", "schema": {"type": "string", "default": "None"}}]}}, "/settings/{path}": {"get": {"summary": "Show user general settings", "description": "Show user general settings", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}]}, "post": {"summary": "Show user general settings", "description": "Show user general settings", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}]}}, "/restore/{path}": {"get": {"summary": "Display a webpage to prepare download or trigger download of a file or folder.", "description": "Display a webpage to prepare download or trigger download of a file or folder.", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}, {"name": "date", "in": "query", "schema": {"type": "string", "default": "None"}}, {"name": "kind", "in": "query", "schema": {"type": "string", "default": "None"}}, {"name": "raw", "in": "query", "schema": {"type": "string", "default": "0"}}]}}, "/prefs/": {"get": {"summary": "Redirect user to general settings", "description": "Redirect user to general settings", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "panelid", "in": "query", "schema": {"type": "string", "default": "None"}}]}}, "/prefs/tokens": {"get": {"summary": "Show current user access token", "description": "Show current user access token", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}, "post": {"summary": "Show current user access token", "description": "Show current user access token", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/prefs/sshkeys": {"get": {"summary": "Show user's SSH keys", "description": "Show user's SSH keys", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}, "post": {"summary": "Show user's SSH keys", "description": "Show user's SSH keys", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/prefs/session": {"get": {"summary": "Show user sessions", "description": "Show user sessions", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}, "post": {"summary": "Show user sessions", "description": "Show user sessions", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/prefs/notification": {"get": {"summary": "Show user notification settings", "description": "Show user notification settings", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}, "post": {"summary": "Show user notification settings", "description": "Show user notification settings", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/prefs/mfa": {"get": {"summary": "Show MFA settings", "description": "Show MFA settings", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}, "post": {"summary": "Show MFA settings", "description": "Show MFA settings", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/prefs/general": {"get": {"summary": "Show user settings", "description": "Show user settings", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}, "post": {"summary": "Show user settings", "description": "Show user settings", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/mfa/": {"get": {"summary": "Show Multi Factor Authentication form", "description": "Show Multi Factor Authentication form", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}, "post": {"summary": "Show Multi Factor Authentication form", "description": "Show Multi Factor Authentication form", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/logs/{path}": {"get": {"summary": "Show repository backup and restore logs", "description": "Show repository backup and restore logs", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}, {"name": "limit", "in": "query", "schema": {"type": "string", "default": "10"}}, {"name": "date", "in": "query", "schema": {"type": "string", "default": "None"}}, {"name": "file", "in": "query", "schema": {"type": "string", "default": "None"}}, {"name": "raw", "in": "query", "schema": {"type": "string", "default": "0"}}]}}, "/logout": {"post": {"summary": "Logout user", "description": "Logout user", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/login/": {"get": {"summary": "Called by auth_form to generate the /login/ page.", "description": "Called by auth_form to generate the /login/ page.", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}, "post": {"summary": "Called by auth_form to generate the /login/ page.", "description": "Called by auth_form to generate the /login/ page.", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/history/{path}": {"get": {"summary": "Show repository, file or folder history", "description": "Show repository, file or folder history", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}, {"name": "limit", "in": "query", "schema": {"type": "string", "default": "10"}}]}}, "/graphs/times/{path}": {"get": {"summary": "Called to show every graphs", "description": "Called to show every graphs", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}, {"name": "limit", "in": "query", "schema": {"type": "string", "default": "30"}}]}}, "/graphs/sizes/{path}": {"get": {"summary": "Called to show every graphs", "description": "Called to show every graphs", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}, {"name": "limit", "in": "query", "schema": {"type": "string", "default": "30"}}]}}, "/graphs/files/{path}": {"get": {"summary": "Called to show every graphs", "description": "Called to show every graphs", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}, {"name": "limit", "in": "query", "schema": {"type": "string", "default": "30"}}]}}, "/graphs/errors/{path}": {"get": {"summary": "Called to show every graphs", "description": "Called to show every graphs", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}, {"name": "limit", "in": "query", "schema": {"type": "string", "default": "30"}}]}}, "/graphs/activities/{path}": {"get": {"summary": "Called to show every graphs", "description": "Called to show every graphs", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}, {"name": "limit", "in": "query", "schema": {"type": "string", "default": "30"}}]}}, "/delete/{path}": {"post": {"summary": "Delete a repo, a file or folder history", "description": "Delete a repo, a file or folder history", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}]}}, "/browse/{path}": {"get": {"summary": "Browser view displaying files and folders in user's repository", "description": "Browser view displaying files and folders in user's repository", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "path", "in": "path", "schema": {"type": "string"}, "required": true}]}}, "/api/currentuser": {"get": {"summary": "Returns information about the current user, including user settings and a list of repositories.", "description": "Returns information about the current user, including user settings and a list of repositories.\n\n**Example Response**\n\n```json\n{\n    \"email\": \"user@example.com\",\n    \"username\": \"admin\",\n    \"fullname\": \"John Smith\",\n    \"disk_usage\": 6642954240,\n    \"disk_quota\": 7904514048,\n    \"repos\": [\n        {\n        \"name\": \"backups/Desktop/C\",\n        \"maxage\": 0,\n        \"keepdays\": -1,\n        \"last_backup_date\": \"2019-08-29T09:42:38-04:00\",\n        \"status\": \"ok\",\n        \"encoding\": \"utf-8\"\n        },\n        // ... additional repository entries ...\n    ]\n}\n```\n\n**Fields in JSON Payload**\n\n- `email`: The email address of the user.\n- `username`: The username of the user.\n- `fullname`: The user full name.\n- `disk_usage`: The current disk space usage of the user.\n- `disk_quota`: The quota of disk space allocated to the user.\n- `report_time_range`: The interval between email report sent to user in number of days.\n- `repos`: An array of repositories associated with the user.\n\n- `name`: The name of the repository.\n- `maxage`: Maximum age for stored backups.\n- `keepdays`: Number of days to keep backups (-1 for indefinite).\n- `last_backup_date`: The date and time of the last backup.\n- `status`: Current status of the repository (e.g., \"ok\" or \"in_progress\").\n- `encoding`: The encoding used for the repository.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": []}, "post": {"summary": "Update current user information: fullname, email, lang and report_time_range", "description": "Update current user information: fullname, email, lang and report_time_range\n\nUpdates some of the user's settings, such as fullname, email, lang, and report_time_range.\n\nReturns status 200 OK on success.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [], "requestBody": {"required": true, "content": {"application/json": {}}}}}, "/api/openapi_json": {"get": {"summary": "Generate OpenAPI JSON for a given CherryPy root application.", "description": "Generate OpenAPI JSON for a given CherryPy root application.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": []}}, "/api/currentuser/repos": {"get": {"summary": "Return repository settings for the given id or name", "description": "Return repository settings for the given id or name\n\nReturns information specific to the repository identified by `<id>` or `<name>`.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "name_or_id", "in": "query", "schema": {"type": "string"}, "required": true}]}, "post": {"summary": "Used to update repository settings.", "description": "Used to update repository settings.\n\nUpdates repository settings for the repository identified by `<id>` or `<name>`.\nFields such as `maxage`, `ignore_weekday`, `keepdays`, and `encoding` can be updated.\n\nReturns status 200 OK on success.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "name_or_id", "in": "query", "schema": {"type": "string", "default": "None"}}], "requestBody": {"required": true, "content": {"application/json": {}}}}}, "/api/currentuser/sshkeys": {"get": {"summary": "Return SSH key for given fingerprint", "description": "Return SSH key for given fingerprint\n\nReturns SSH key information identified by `<fingerprint>`.\n\n**Example Response**\n\n```json\n{\"title\": \"my-laptop\", \"fingerprint\": \"b5:f0:40:ee:41:53:9d:68:e1:9b:02:3e:39:99:a8:9b\"}\n```", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "fingerprint", "in": "query", "schema": {"type": "string"}, "required": true}]}, "delete": {"summary": "Delete a SSH key", "description": "Delete a SSH key\n\nDeletes the SSH key identified by `<fingerprint>`.\n\nReturns status 200 OK on success.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "fingerprint", "in": "query", "schema": {"type": "string"}, "required": true}]}, "post": {"summary": "Add a SSH key to current user", "description": "Add a SSH key to current user\n\nRegisters a new public SSH key for the current user.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [], "requestBody": {"required": true, "content": {"application/json": {}}}}}, "/api/currentuser/tokens": {"get": {"summary": "Return a specific access token info", "description": "Return a specific access token info\n\nReturns access token information identified by `<name>`.\n\n**Example Response**\n\n```json\n{\"title\": \"test2\", \"access_time\": \"2024-01-30T17:59:08Z\", \"creation_time\": \"2024-01-30T17:57:51Z\", \"expiration_time\": null}\n```", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "name", "in": "query", "schema": {"type": "string"}, "required": true}]}, "delete": {"summary": "Delete a specific access token.", "description": "Delete a specific access token.\n\nRevokes the access token identified by `<title>`.\n\nReturns status 200 OK on success.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "name", "in": "query", "schema": {"type": "string"}, "required": true}]}, "post": {"summary": "Create a new access token", "description": "Create a new access token\n\nReturns status 200 OK on success.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [], "requestBody": {"required": true, "content": {"application/json": {}}}}}, "/admin/": {"get": {"summary": "Admin dashboard", "description": "Admin dashboard", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/admin/users/delete": {"post": {"summary": "Delete a user", "description": "Delete a user", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "username", "in": "query", "schema": {"type": "string", "default": "None"}}]}}, "/admin/users/edit": {"get": {"summary": "Show form to edit user", "description": "Show form to edit user", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "username_vpath", "in": "query", "schema": {"type": "string"}, "required": true}]}, "post": {"summary": "Show form to edit user", "description": "Show form to edit user", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": [{"name": "username_vpath", "in": "query", "schema": {"type": "string"}, "required": true}]}}, "/admin/users/": {"get": {"summary": "Show user list", "description": "Show user list", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/admin/users/new": {"get": {"summary": "Show form to create a new user", "description": "Show form to create a new user", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}, "post": {"summary": "Show form to create a new user", "description": "Show form to create a new user", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/admin/sysinfo/": {"get": {"summary": "Show system information and application config", "description": "Show system information and application config", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/admin/session/": {"get": {"summary": "Show or remove user sessions", "description": "Show or remove user sessions", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}, "post": {"summary": "Show or remove user sessions", "description": "Show or remove user sessions", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/admin/repos/": {"get": {"summary": "Show all user repositories", "description": "Show all user repositories", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}, "/admin/logs/data.json": {"get": {"summary": "Return log file as json.", "description": "Return log file as json.\n\nTo reduce the payload size we use one letter for the key.", "responses": {"200": {"description": "OK", "content": {"application/json": {}}}}, "parameters": [{"name": "limit", "in": "query", "schema": {"type": "string", "default": "2000"}}]}}, "/admin/logs/": {"get": {"summary": "Show server logs.", "description": "Show server logs.", "responses": {"200": {"description": "OK", "content": {"text/html": {}}}}, "parameters": []}}}}